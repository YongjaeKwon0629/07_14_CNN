## 3. 주요 구성 요소 설명

CNN은 여러 계층(layer)들이 순차적으로 쌓여서 구성됩니다. 각 계층은 이미지에서 점점 더 복잡한 특징을 추출하고, 이를 바탕으로 최종 결과를 판단하게 합니다.

아래는 CNN을 구성하는 **핵심 계층들과 그 역할**에 대한 설명입니다.

---

### 🔹 1. Convolution Layer (합성곱 층)

#### 🧩 역할:
- 이미지의 **로컬 영역(작은 패치)**에 필터(커널)를 적용하여 **특징(feature)**을 추출합니다.
- 예: 가장자리, 선, 모서리, 색 변화 등 감지

#### 🛠️ 작동 방식:
- 필터(예: 3x3 크기)가 이미지 위를 겹쳐가며 이동(stride)
- 각 위치마다 필터와 이미지의 값을 곱한 뒤 합산 (→ **특징 맵, Feature Map** 생성)
- 하나의 이미지에 여러 필터 적용 → 다양한 특징 추출 가능

#### 📌 예시:
- 입력 이미지: 28x28
- 필터 32개 → 출력은 32장의 28x28 Feature Map

---

### 🔹 2. Activation Function (활성화 함수)

#### 🧩 역할:
- 선형 연산 결과에 **비선형성(non-linearity)**을 부여하여, 신경망이 복잡한 패턴을 학습할 수 있도록 도와줍니다.

#### ⚡ 대표 함수: **ReLU (Rectified Linear Unit)**
- 수식: `f(x) = max(0, x)`
- 0 이하는 전부 0으로 만들고, 양수는 그대로 통과
- 연산이 간단하고 학습 속도가 빠름

#### 🧠 다른 예시:
- Sigmoid, Tanh 등도 있지만 CNN에서는 ReLU가 대부분 사용됨

---

### 🔹 3. Pooling Layer (풀링 층)

#### 🧩 역할:
- **중요한 정보만 남기고 공간을 축소**하여 계산량을 줄이고, **과적합(overfitting)**을 방지합니다.

#### 🧪 주요 종류:
- **Max Pooling**: 각 지역에서 가장 큰 값만 남김 (가장 흔히 사용)
- **Average Pooling**: 평균값을 사용

#### 📌 예시:
- 입력 Feature Map: 28x28 → 2x2 Max Pooling 적용 → 출력: 14x14

---

### 🔹 4. Flatten Layer

#### 🧩 역할:
- 2D Feature Map을 1D 벡터로 펼쳐서 **Fully Connected Layer**에 입력하기 위한 준비 단계입니다.
- 예: `7x7x64 → 3136` 차원 벡터

---

### 🔹 5. Fully Connected Layer (완전 연결 층)

#### 🧩 역할:
- 앞에서 추출된 **모든 특징을 종합**하여 최종 판단을 내리는 층입니다.
- 일반적인 신경망과 같은 방식으로 작동합니다.

#### 🧠 예시:
- `Flatten → Dense(128) → Dense(10) (Softmax)` 형태로 사용

---

### 🔹 6. Output Layer (출력층)

#### 🧩 역할:
- 최종 결과를 **클래스별 확률**로 출력합니다.

#### ⚙️ Softmax 함수 사용:
- 출력값들을 0~1 사이의 확률로 변환하고, 총합은 1이 되도록 만듭니다.
- 예: `[0.1, 0.9] → 강아지일 확률 90%`

---

### 📊 전체 구성 요약표

| 계층 이름 | 주요 기능 | 출력 예시 (입력: 28x28 이미지 기준) |
|-----------|-----------|-------------------------------------|
| Convolution | 국소 특징 추출 | (28, 28, 32) |
| ReLU | 비선형성 부여 | (28, 28, 32) |
| Pooling | 크기 축소 및 요약 | (14, 14, 32) |
| Convolution | 고차원 특징 추출 | (14, 14, 64) |
| Pooling | 또 한 번의 축소 | (7, 7, 64) |
| Flatten | 1D 벡터로 변환 | (3136,) |
| Fully Connected | 종합 판단 | (128,) → (10,) |
| Output (Softmax) | 분류 확률 출력 | (10,) |

---

> 📝 **팁**: CNN은 계층이 많다고 무조건 성능이 좋은 것은 아닙니다. **적절한 구조 설계와 정규화 기법(Dropout 등)**이 중요합니다.
